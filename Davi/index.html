<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quiz SENAC – Descubra seu próximo curso</title>
  <!-- Tipografia do sistema para performance -->
  <style>
    :root{
      --senac-blue-900:#003b5c;
      --senac-blue-700:#145a7a;
      --senac-blue-500:#1e88b5;
      --senac-orange:#ff7f00;
      --senac-cream:#fff6ed;
      --ink:#0f172a;
      --muted:#475569;
      --ok:#16a34a;
      --er:#b91c1c;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.12), 0 2px 10px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif; color:var(--ink);
      background: radial-gradient(1200px 600px at 20% -10%, rgba(255,127,0,.12), transparent 60%),
                  radial-gradient(900px 500px at 120% 20%, rgba(30,136,181,.18), transparent 60%),
                  linear-gradient(180deg, #f8fafc, var(--senac-cream));
      min-height:100%;
    }

    .shell{max-width:860px;margin:28px auto;padding:16px}

    .hero{
      position:relative;
      background:linear-gradient(135deg, var(--senac-blue-900), var(--senac-blue-700));
      color:white;border-radius:var(--radius);padding:28px 24px;box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero h1{margin:0 0 6px 0;font-size:clamp(22px,3.4vw,32px)}
    .hero p{margin:0;color:#e2e8f0}
    .badge{position:absolute;right:-30px;top:-30px;width:160px;height:160px;border-radius:50%;
      background:conic-gradient(from 180deg, var(--senac-orange), #ffd5a2 40%, var(--senac-orange));
      filter:blur(12px);opacity:.35;}

    .card{
      background:white;border-radius:var(--radius);box-shadow:var(--shadow);padding:18px 18px;margin-top:16px;
      transition:transform .25s ease, box-shadow .25s ease;
    }
    .card:hover{transform:translateY(-2px);box-shadow:0 16px 40px rgba(0,0,0,.15)}

    .row{display:grid;gap:12px}
    @media(min-width:700px){.row{grid-template-columns:1fr 1fr}}

    .pergunta{padding:14px;border:1px solid #e5e7eb;border-radius:14px;background:#fbfdff;
      transition:background .3s ease,border-color .3s ease}
    .pergunta:focus-within{background:#f0f9ff;border-color:var(--senac-blue-500)}
    .pergunta p{margin:.2rem 0 .5rem 0;font-weight:600}

    .choice{display:flex;gap:10px;align-items:center;margin:.25rem 0}
    .choice input{accent-color:var(--senac-blue-500)}

    .actions{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:10px}

    button{
      appearance:none;border:0;border-radius:12px;padding:12px 18px;font-weight:700;cursor:pointer;
      background:linear-gradient(135deg,var(--senac-orange),#ffb156);
      color:#111;box-shadow:inset 0 0 0 2px rgba(255,255,255,.6), 0 6px 18px rgba(255,127,0,.35);
      transition:transform .2s ease, filter .2s ease;will-change:transform
    }
    button:hover{transform:translateY(-1px);filter:brightness(1.05)}
    button:active{transform:translateY(0)}

    .secondary{background:linear-gradient(135deg,#e2e8f0,#f8fafc);box-shadow:inset 0 0 0 2px #cbd5e1;color:#0f172a}

    .consent{display:flex;gap:10px;align-items:flex-start;margin-top:8px;color:var(--muted)}
    .consent input{accent-color:var(--senac-orange);margin-top:3px}

    .progress{height:10px;background:#e2e8f0;border-radius:999px;overflow:hidden}
    .progress > span{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--senac-blue-500),var(--senac-orange));
      transition:width .4s cubic-bezier(.2,.7,.2,1)}

    #resultado{margin-top:16px;padding:16px;border-radius:14px;background:#f8fafc;border:1px dashed #cbd5e1}
    #resultado h2{margin:0 0 6px 0}

    .pill{display:inline-block;padding:6px 10px;border-radius:999px;font-size:.85rem;font-weight:700;letter-spacing:.2px}
    .pill.ok{background:rgba(22,163,74,.12);color:var(--ok)}
    .pill.warn{background:rgba(185,28,28,.12);color:var(--er)}

    .fade-in{animation:fade .5s ease both}
    @keyframes fade{from{opacity:0;transform:translateY(6px)} to{opacity:1;transform:none}}
  </style>
</head>
<body>
  <div class="shell">
    <header class="hero">
      <div class="badge" aria-hidden="true"></div>
      <h1>Quiz SENAC – Descubra seu próximo curso</h1>
      <p>Responda <strong>8 perguntas rápidas (sim/não)</strong>. No final, você recebe um texto personalizado e uma sugestão de curso.</p>
    </header>

    <main class="card">
      <div class="progress" aria-hidden="true"><span id="bar"></span></div>

      <form id="quiz-form" novalidate>
        <section class="row" id="questions">
          <!-- As 8 perguntas (sim/não) -->
          <div class="pergunta">
            <p>1) Você está empregado?</p>
            <label class="choice"><input type="radio" name="q1" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q1" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>2) Atualmente você está estudando?</p>
            <label class="choice"><input type="radio" name="q2" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q2" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>3) Você domina o uso do computador (pacote Office)?</p>
            <label class="choice"><input type="radio" name="q3" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q3" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>4) Já utiliza Inteligência Artificial em seu dia a dia?</p>
            <label class="choice"><input type="radio" name="q4" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q4" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>5) Fez algum curso de atualização nos últimos 2 anos?</p>
            <label class="choice"><input type="radio" name="q5" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q5" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>6) Possui aplicativos no celular para o trabalho/organização do dia a dia?</p>
            <label class="choice"><input type="radio" name="q6" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q6" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>7) Você compreende minimamente um outro idioma?</p>
            <label class="choice"><input type="radio" name="q7" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q7" value="nao"> Não</label>
          </div>

          <div class="pergunta">
            <p>8) Já tem um objetivo profissional definido?</p>
            <label class="choice"><input type="radio" name="q8" value="sim" required> Sim</label>
            <label class="choice"><input type="radio" name="q8" value="nao"> Não</label>
          </div>
        </section>

        <div class="actions">
          <button type="submit" id="submitBtn">Ver meu resultado</button>
          <button type="reset" class="secondary" id="resetBtn" title="Limpar respostas">Limpar</button>
        </div>

        <label class="consent">
          <input type="checkbox" id="consent" />
          <span>Autorizo o envio das minhas respostas.</span>
        </label>
        <small id="consentWarn" style="color:var(--er);display:none">Para enviar suas respostas ao dono, marque esta caixa.</small>
      </form>

      <section id="resultado" class="fade-in" hidden>
        <h2>Seu resultado</h2>
        <p id="texto-composto"></p>
        <p id="texto-final"></p>
        <p id="curso" class="pill" style="margin-top:6px"></p>
      </section>
    </main>

    <footer style="opacity:.8;margin-top:10px;text-align:center">
      <small>© SENAC – protótipo educativo. Este formulário utiliza Firestore (opcional) e não coleta dados sensíveis.</small>
    </footer>
  </div>

  <script type="module">
    const firebaseConfig = {
      apiKey: "AIzaSyAMe5eFUFH-4eEKDzeFhTQrCYrfte_5iRY",
      authDomain: "projeto-senac-c5b15.firebaseapp.com",
      databaseURL: "https://projeto-senac-c5b15-default-rtdb.firebaseio.com",
      projectId: "projeto-senac-c5b15",
      storageBucket: "projeto-senac-c5b15.firebasestorage.app",
      messagingSenderId: "693115421474",
      appId: "1:693115421474:web:49fe7383dd6396e6a8db7b",
      measurementId: "G-KRGYF7XGE5"
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    const form = document.querySelector('#quiz-form');
    const bar = document.querySelector('#bar');
    const consent = document.querySelector('#consent');
    const consentWarn = document.querySelector('#consentWarn');
    const resBox = document.querySelector('#resultado');
    const textoComposto = document.querySelector('#texto-composto');
    const textoFinal = document.querySelector('#texto-final');
    const curso = document.querySelector('#curso');

    const textos = {
      q1:{
        sim:"Você está trabalhando, parabéns! Estar empregado mantém sua experiência ativa e abre portas para novas oportunidades.",
        nao:"Você está desempregado, mas não desanime. Qualificação aumenta muito as chances de voltar ao mercado."
      },
      q2:{
        sim:"Estudar é uma grande vantagem competitiva. Você já está no caminho certo!",
        nao:"Deixar de estudar pode frear sua carreira. Que tal começar com algo acessível, como oficinas online do Senac?"
      },
      q3:{
        sim:"Dominar Excel, Word e PowerPoint é quase universal no mercado. Isso aumenta sua produtividade.",
        nao:"Vale a pena aprender pacote Office. Muitas vagas administrativas exigem esse conhecimento."
      },
      q4:{
        sim:"Ótimo! O uso de IA está cada vez mais valorizado nas empresas.",
        nao:"Você está perdendo uma oportunidade: a IA já transforma o mercado em várias áreas. Dá para começar com ferramentas simples."
      },
      q5:{
        sim:"Parabéns por ter feito um curso nos últimos 2 anos! Esse é o espírito de atualização contínua.",
        nao:"O conhecimento envelhece rápido. Pequenos cursos podem reabrir portas para novas oportunidades."
      },
      q6:{
        sim:"Apps no celular ajudam muito na produtividade e organização do dia a dia.",
        nao:"Sem apps para organização, você pode estar perdendo tempo. Há opções gratuitas que fazem diferença."
      },
      q7:{
        sim:"Dominar outro idioma abre portas e pode alavancar sua carreira.",
        nao:"Mesmo o básico de um segundo idioma já faz diferença e amplia oportunidades."
      },
      q8:{
        sim:"Ter um objetivo profissional definido ajuda a focar energia e transformar passos em conquistas.",
        nao:"Sem metas claras, é fácil andar em círculos. Defina um objetivo como um mapa para orientar decisões."
      }
    };

    const finais = {
      alto: "Agora é a sua vez de crescer! Você está no caminho certo: continue se atualizando e ampliando seu networking. Conte com o Senac para seguir nessa jornada!",
      medio: "Agora é a sua vez de inovar! Você já tem conquistas, mas precisa acelerar a qualificação. Um plano de estudos e novas ferramentas tecnológicas podem fazer a diferença. Conte com o Senac para acelerar!",
      baixo: "Agora é a sua vez de mudar! Este é um ponto de partida. Comece por algo simples: um curso online, aprender a usar IA ou apps. Cada passo abre oportunidades, e o Senac está aqui para ajudar."
    };

    function cursoSugerido(simCount){
      if(simCount <= 2){
        return {label:"📚 Sugestão: Informática Básica + Oficina de IA para Iniciantes", tone:"warn"};
      } else if(simCount <= 5){
        return {label:"🧭 Sugestão: Pacote Office Intermediário + Planejamento de Carreira", tone:"ok"};
      } else {
        return {label:"🚀 Sugestão: Excel Avançado / Inglês Profissional / Especialização na sua área", tone:"ok"};
      }
    }

    function updateProgress(){
      const total = 8;
      const marcadas = new FormData(form);
      let responded = 0;
      for(let i=1;i<=8;i++) if(marcadas.get('q'+i)) responded++;
      bar.style.width = (responded/total*100)+"%";
    }
    form.addEventListener('change', updateProgress);

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      resBox.hidden = true; textoComposto.textContent=''; textoFinal.textContent=''; curso.textContent=''; curso.className='pill';
      updateProgress(); consentWarn.style.display='none';
    });

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();

      // garante que todas as perguntas foram respondidas
      for(let i=1;i<=8;i++){
        if(!form.querySelector(`[name=q${i}]:checked`)){
          alert(`Responda a questão ${i}.`);
          return;
        }
      }

      // se não marcou o consentimento, não mostra resultado
      if(!consent.checked){
        consentWarn.style.display='block';
        return;
      }
      consentWarn.style.display='none';

      const data = new FormData(form);
      const respostas = {};
      let simCount = 0;
      let parts = [];

      for(let i=1;i<=8;i++){
        const val = data.get('q'+i);
        respostas['q'+i] = val;
        if(val==='sim') simCount++;
        const t = val==='sim' ? textos['q'+i].sim : textos['q'+i].nao;
        parts.push(`• ${t}`);
      }

      textoComposto.textContent = parts.join(' ');

      let faixa = simCount>=6 ? 'alto' : simCount>=3 ? 'medio' : 'baixo';
      textoFinal.textContent = finais[faixa];

      const sugestao = cursoSugerido(simCount);
      curso.textContent = sugestao.label;
      curso.className = 'pill ' + (sugestao.tone==='ok'?'ok':'warn');

      resBox.hidden = false;
      resBox.scrollIntoView({behavior:'smooth', block:'start'});

      // envia ao Firestore SEM alertas extras
      try{
        await addDoc(collection(db, 'quiz-respostas'), {
          respostas,
          simCount,
          faixa,
          sugestao: sugestao.label,
          createdAt: serverTimestamp()
        });
      }catch(err){
        console.error(err);
        // apenas registra no console, sem alertar usuário
      }
  });
  </script>
</body>
</html>